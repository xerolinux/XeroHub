<!-- Changelog Modal -->
<div id="changelog-modal" class="fixed inset-0 z-[9999] hidden items-center justify-center">
  <!-- Backdrop -->
  <div id="changelog-backdrop" class="absolute inset-0 bg-black/70 backdrop-blur-sm"></div>

  <!-- Modal container -->
  <div class="relative w-full max-w-[860px] mx-4 glass rounded-2xl overflow-hidden" style="max-height: 86vh;">
    <!-- Close button -->
    <button
      id="changelog-close"
      class="absolute top-4 right-4 z-10 w-9 h-9 rounded-full bg-[var(--color-bg-secondary)] border border-[var(--color-border)] text-[var(--color-text-secondary)] hover:text-white hover:border-[var(--color-border-hover)] transition-all duration-200 flex items-center justify-center cursor-pointer"
      aria-label="Close changelog"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Header -->
    <div class="px-8 pt-8 pb-4">
      <h2 class="display-heading text-2xl text-[var(--color-text-primary)] flex items-center gap-3">
        <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
        </svg>
        XeroLinux Changelog
      </h2>
      <div class="mt-3 h-px bg-gradient-to-r from-[var(--color-accent)] via-[var(--color-accent-light)] to-transparent"></div>
    </div>

    <!-- Body (scrollable) -->
    <div class="px-8 pb-8 overflow-y-auto" style="max-height: calc(86vh - 120px);">
      <div>
        <!-- Date header -->
        <p class="text-xs uppercase tracking-widest text-[var(--color-accent-light)] font-semibold mb-2">2026-03-01</p>
        <!-- Changelog items -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            Updated to KDE 6.6.1.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            System update during install.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            <strong class="text-[var(--color-text-primary)]">zRAM</strong> enabled by default.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            <strong class="text-[var(--color-text-primary)]">Bios/MBR</strong> support added back.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            <strong class="text-[var(--color-text-primary)]">Plasma-Login</strong> used by default.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            Updated to latest Kernel (6.19.x).
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            <strong class="text-[var(--color-text-primary)]">nVidia</strong> ISO more robust for Laptops.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            Added new widgets & updated the old.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            All-new <strong class="text-[var(--color-text-primary)]">Live Welcome</strong> tool made in <strong class="text-[var(--color-text-primary)]">Rust</strong>.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            Re-enabled <strong class="text-[var(--color-text-primary)]">BTRFS</strong> & <strong class="text-[var(--color-text-primary)]">Encryption</strong> in Calamares.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            New G.U.I Package Manager made in <strong class="text-[var(--color-text-primary)]">Rust/Qt</strong>.
          </div>
          <div class="text-sm text-[var(--color-text-secondary)] border-l-2 border-[var(--color-accent)]/40 bg-[var(--color-bg-primary)]/30 rounded-r-lg px-4 py-2">
            <strong class="text-[var(--color-text-primary)]">Scheds-ext</strong> & Kernel Manager in <strong class="text-[var(--color-text-primary)]">Xero-Toolkit</strong>.
          </div>
        </div>

        <!-- EOF -->
        <div class="flex items-center gap-4 mt-6">
          <div class="flex-1 h-px bg-gradient-to-r from-transparent via-[var(--color-border-hover)] to-transparent"></div>
          <span class="font-mono text-xs text-[var(--color-text-muted)] tracking-widest whitespace-nowrap">~ ~ ~ E.O.F ~ ~ ~</span>
          <div class="flex-1 h-px bg-gradient-to-r from-transparent via-[var(--color-border-hover)] to-transparent"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  (function () {
    const modal = document.getElementById('changelog-modal');
    const backdrop = document.getElementById('changelog-backdrop');
    const closeBtn = document.getElementById('changelog-close');

    function openModal() {
      modal.classList.remove('hidden');
      modal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      document.body.style.overflow = '';
    }

    document.querySelectorAll('[data-changelog-modal]').forEach(btn => {
      btn.addEventListener('click', openModal);
    });

    closeBtn?.addEventListener('click', closeModal);
    backdrop?.addEventListener('click', closeModal);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
        closeModal();
      }
    });
  })();
</script>
