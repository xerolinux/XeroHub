<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Programming on XeroLinux HQ</title><link>https://xerolinux.xyz/tags/programming/</link><description>Recent content in Programming on XeroLinux HQ</description><generator>Hugo</generator><language>en</language><lastBuildDate>Thu, 27 Jun 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://xerolinux.xyz/tags/programming/index.xml" rel="self" type="application/rss+xml"/><item><title>My First Python Script</title><link>https://xerolinux.xyz/posts/first-python-script/</link><pubDate>Thu, 27 Jun 2024 00:00:00 +0000</pubDate><guid>https://xerolinux.xyz/posts/first-python-script/</guid><description>

&lt;h3 class="relative group">What prompted me ? 
 &lt;div id="what-prompted-me-" class="anchor">&lt;/div>
 
 &lt;span
 class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
 &lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
 style="text-decoration-line: none !important;" href="#what-prompted-me-" aria-label="Anchor">#&lt;/a>
 &lt;/span> 
 
&lt;/h3>
&lt;p>Well, as I was porting all relevant forum posts to this site in &lt;strong>markdown&lt;/strong>, I needed a better way to do so. Someone on &lt;strong>Mastodon&lt;/strong> gave me the idea of writing a python script that does it for me. So I went on learning spree. Not really&amp;hellip;&lt;/p>
&lt;p>I gotta be honest with you guys, I had to use &lt;strong>ChatGPT&lt;/strong>. Doing it by watching &lt;strong>YouTube&lt;/strong> videos, or by searching the net would have taken me ages. So I went to the thing that does things much faster. And before you say it, I am well aware that we can&amp;rsquo;t rely on it 100%, coz it&amp;rsquo;s very inaccurate and licensing is an issue. So I was careful. Anyway, I will post what I have learned so far, maybe it can be of use to you.&lt;/p>


&lt;h3 class="relative group">The code 
 &lt;div id="the-code" class="anchor">&lt;/div>
 
 &lt;span
 class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
 &lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
 style="text-decoration-line: none !important;" href="#the-code" aria-label="Anchor">#&lt;/a>
 &lt;/span> 
 
&lt;/h3>
&lt;p>Before we begin, I need to mention that code is not perfect since it&amp;rsquo;s my very first script. But it did the trick for me. It could still use some tweaking, so if you know how I can make it better, please feel free to let me know how. Use any of my socials to contact me.&lt;/p>
&lt;p>Issue with script is, formatting, as in result &lt;strong>Markdown&lt;/strong> is not well formatted, with a huge amout of dead space, underscores all over and embedded videos are always put at the end of posts. Not to mention that &lt;code>code&lt;/code> snippets are not labeled as Bash or Yaml etc..&lt;/p>
&lt;p>With that being said, let&amp;rsquo;s begin shall we ?&lt;/p>
&lt;p>Before going through the code, make sure you have the following packages installed on your system. Also forum posts need to be accessible withou an account otherwise script will fail miserably.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-Bash" data-lang="Bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S python python-beautifulsoup4 python-requests python-markdownify
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now here&amp;rsquo;s the code, then I will explain&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">bs4&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">BeautifulSoup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">markdownify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">convert_to_markdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">soup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">BeautifulSoup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;html.parser&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Extract the main content of the post&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">post_content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">soup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;div&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;class&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;post_body&amp;#39;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">post_content&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;Could not find the post content.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Convert HTML to Markdown, including embedded YouTube videos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">markdownify&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">markdownify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">post_content&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">heading_style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ATX&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Process embedded YouTube videos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">iframe&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">post_content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">find_all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;iframe&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">src&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">iframe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;src&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s1">&amp;#39;youtube.com&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">src&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s1">&amp;#39;youtu.be&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">video_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;?&amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">youtube_markdown&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">[![YouTube Video](https://img.youtube.com/vi/&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">video_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/0.jpg)](&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">)&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">youtube_markdown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">markdown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># URLs of the forum posts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;https://forum.xerolinux.xyz/thread-131.html&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create an output directory if it doesn&amp;#39;t exist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">output_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;markdown_posts&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makedirs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Convert each URL to Markdown and save to file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">urls&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markdown_content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">convert_to_markdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Extract thread ID from URL to use as filename&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thread_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.html&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;post_&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">thread_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.md&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">markdown_content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Saved Markdown for &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> to &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>

&lt;h3 class="relative group">Basic Explanation 
 &lt;div id="basic-explanation" class="anchor">&lt;/div>
 
 &lt;span
 class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
 &lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
 style="text-decoration-line: none !important;" href="#basic-explanation" aria-label="Anchor">#&lt;/a>
 &lt;/span> 
 
&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>Import Libraries:&lt;/strong> We use requests to fetch the webpage content and BeautifulSoup to parse the HTML. The markdownify library is used to convert HTML to Markdown.&lt;/li>
&lt;li>&lt;strong>Extract Content:&lt;/strong> The script extracts the main content of the post by looking for the div with class &lt;code>post_body&lt;/code>.&lt;/li>
&lt;li>&lt;strong>Convert to Markdown:&lt;/strong> The script uses the markdownify library to convert the HTML content to Markdown and processes embedded YouTube videos.&lt;/li>
&lt;li>&lt;strong>Save to File:&lt;/strong> The script saves each converted post to its own Markdown file. The filenames are derived from the thread IDs in the URLs.&lt;/li>
&lt;li>&lt;strong>Output Directory:&lt;/strong> The script creates an &lt;code>output_dir&lt;/code> directory if it doesn&amp;rsquo;t exist and saves the Markdown files there.&lt;/li>
&lt;/ul>


&lt;h3 class="relative group">How to Run the Script 
 &lt;div id="how-to-run-the-script" class="anchor">&lt;/div>
 
 &lt;span
 class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
 &lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
 style="text-decoration-line: none !important;" href="#how-to-run-the-script" aria-label="Anchor">#&lt;/a>
 &lt;/span> 
 
&lt;/h3>
&lt;ul>
&lt;li>Save the Script: Copy the script into a file named &lt;code>forum_to_markdown.py&lt;/code>.&lt;/li>
&lt;li>Make sure you mark script as executable via &lt;code>chmod +x forum_to_markdown.py&lt;/code>&lt;/li>
&lt;li>Run the Script: Execute the script by running the following command in your terminal:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-Bash" data-lang="Bash">&lt;span class="line">&lt;span class="cl">python forum_to_markdown.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This script will output each post to its own Markdown file in the &lt;code>markdown_posts&lt;/code> directory.&lt;/p>
&lt;p>That&amp;rsquo;s it for now. Do let me know what you think.&lt;/p></description><content:encoded>&lt;![CDATA[<h3 class="relative group">What prompted me ?<div id="what-prompted-me-" class="anchor"/><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#what-prompted-me-" aria-label="Anchor">#</a></span></h3><p>Well, as I was porting all relevant forum posts to this site in<strong>markdown</strong>, I needed a better way to do so. Someone on<strong>Mastodon</strong> gave me the idea of writing a python script that does it for me. So I went on learning spree. Not really&hellip;</p><p>I gotta be honest with you guys, I had to use<strong>ChatGPT</strong>. Doing it by watching<strong>YouTube</strong> videos, or by searching the net would have taken me ages. So I went to the thing that does things much faster. And before you say it, I am well aware that we can&rsquo;t rely on it 100%, coz it&rsquo;s very inaccurate and licensing is an issue. So I was careful. Anyway, I will post what I have learned so far, maybe it can be of use to you.</p><h3 class="relative group">The code<div id="the-code" class="anchor"/><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#the-code" aria-label="Anchor">#</a></span></h3><p>Before we begin, I need to mention that code is not perfect since it&rsquo;s my very first script. But it did the trick for me. It could still use some tweaking, so if you know how I can make it better, please feel free to let me know how. Use any of my socials to contact me.</p><p>Issue with script is, formatting, as in result<strong>Markdown</strong> is not well formatted, with a huge amout of dead space, underscores all over and embedded videos are always put at the end of posts. Not to mention that<code>code</code> snippets are not labeled as Bash or Yaml etc..</p><p>With that being said, let&rsquo;s begin shall we ?</p><p>Before going through the code, make sure you have the following packages installed on your system. Also forum posts need to be accessible withou an account otherwise script will fail miserably.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Bash" data-lang="Bash"><span class="line"><span class="cl">sudo pacman -S python python-beautifulsoup4 python-requests python-markdownify</span></span></code></pre></div><p>Now here&rsquo;s the code, then I will explain&hellip;</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">import</span><span class="nn">requests</span></span></span><span class="line"><span class="cl"><span class="kn">from</span><span class="nn">bs4</span><span class="kn">import</span><span class="n">BeautifulSoup</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="nn">markdownify</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="nn">os</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="k">def</span><span class="nf">convert_to_markdown</span><span class="p">(</span><span class="n">url</span><span class="p">):</span></span></span><span class="line"><span class="cl"><span class="n">response</span><span class="o">=</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></span></span><span class="line"><span class="cl"><span class="n">soup</span><span class="o">=</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span><span class="s1">'html.parser'</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Extract the main content of the post</span></span></span><span class="line"><span class="cl"><span class="n">post_content</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'div'</span><span class="p">,</span><span class="p">{</span><span class="s1">'class'</span><span class="p">:</span><span class="s1">'post_body'</span><span class="p">})</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="k">if</span><span class="ow">not</span><span class="n">post_content</span><span class="p">:</span></span></span><span class="line"><span class="cl"><span class="k">return</span><span class="s2">"Could not find the post content."</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Convert HTML to Markdown, including embedded YouTube videos</span></span></span><span class="line"><span class="cl"><span class="n">markdown</span><span class="o">=</span><span class="n">markdownify</span><span class="o">.</span><span class="n">markdownify</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">post_content</span><span class="p">),</span><span class="n">heading_style</span><span class="o">=</span><span class="s2">"ATX"</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Process embedded YouTube videos</span></span></span><span class="line"><span class="cl"><span class="k">for</span><span class="n">iframe</span><span class="ow">in</span><span class="n">post_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'iframe'</span><span class="p">):</span></span></span><span class="line"><span class="cl"><span class="n">src</span><span class="o">=</span><span class="n">iframe</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'src'</span><span class="p">)</span></span></span><span class="line"><span class="cl"><span class="k">if</span><span class="s1">'youtube.com'</span><span class="ow">in</span><span class="n">src</span><span class="ow">or</span><span class="s1">'youtu.be'</span><span class="ow">in</span><span class="n">src</span><span class="p">:</span></span></span><span class="line"><span class="cl"><span class="n">video_id</span><span class="o">=</span><span class="n">src</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'?'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></span></span><span class="line"><span class="cl"><span class="n">youtube_markdown</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">[![YouTube Video](https://img.youtube.com/vi/</span><span class="si">{</span><span class="n">video_id</span><span class="si">}</span><span class="s2">/0.jpg)](</span><span class="si">{</span><span class="n">src</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">"</span></span></span><span class="line"><span class="cl"><span class="n">markdown</span><span class="o">+=</span><span class="n">youtube_markdown</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="k">return</span><span class="n">markdown</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># URLs of the forum posts</span></span></span><span class="line"><span class="cl"><span class="n">urls</span><span class="o">=</span><span class="p">[</span></span></span><span class="line"><span class="cl"><span class="s2">"https://forum.xerolinux.xyz/thread-131.html"</span></span></span><span class="line"><span class="cl"><span class="p">]</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Create an output directory if it doesn't exist</span></span></span><span class="line"><span class="cl"><span class="n">output_dir</span><span class="o">=</span><span class="s1">'markdown_posts'</span></span></span><span class="line"><span class="cl"><span class="k">if</span><span class="ow">not</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">):</span></span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Convert each URL to Markdown and save to file</span></span></span><span class="line"><span class="cl"><span class="k">for</span><span class="n">url</span><span class="ow">in</span><span class="n">urls</span><span class="p">:</span></span></span><span class="line"><span class="cl"><span class="n">markdown_content</span><span class="o">=</span><span class="n">convert_to_markdown</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="c1"># Extract thread ID from URL to use as filename</span></span></span><span class="line"><span class="cl"><span class="n">thread_id</span><span class="o">=</span><span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.html'</span><span class="p">,</span><span class="s1">''</span><span class="p">)</span></span></span><span class="line"><span class="cl"><span class="n">output_file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span><span class="sa">f</span><span class="s2">"post_</span><span class="si">{</span><span class="n">thread_id</span><span class="si">}</span><span class="s2">.md"</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="k">with</span><span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span><span class="s1">'w'</span><span class="p">)</span><span class="k">as</span><span class="n">file</span><span class="p">:</span></span></span><span class="line"><span class="cl"><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">markdown_content</span><span class="p">)</span></span></span><span class="line"><span class="cl"/></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Saved Markdown for</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> to</span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span></span></span></code></pre></div><h3 class="relative group">Basic Explanation<div id="basic-explanation" class="anchor"/><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#basic-explanation" aria-label="Anchor">#</a></span></h3><ul><li><strong>Import Libraries:</strong> We use requests to fetch the webpage content and BeautifulSoup to parse the HTML. The markdownify library is used to convert HTML to Markdown.</li><li><strong>Extract Content:</strong> The script extracts the main content of the post by looking for the div with class<code>post_body</code>.</li><li><strong>Convert to Markdown:</strong> The script uses the markdownify library to convert the HTML content to Markdown and processes embedded YouTube videos.</li><li><strong>Save to File:</strong> The script saves each converted post to its own Markdown file. The filenames are derived from the thread IDs in the URLs.</li><li><strong>Output Directory:</strong> The script creates an<code>output_dir</code> directory if it doesn&rsquo;t exist and saves the Markdown files there.</li></ul><h3 class="relative group">How to Run the Script<div id="how-to-run-the-script" class="anchor"/><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#how-to-run-the-script" aria-label="Anchor">#</a></span></h3><ul><li>Save the Script: Copy the script into a file named<code>forum_to_markdown.py</code>.</li><li>Make sure you mark script as executable via<code>chmod +x forum_to_markdown.py</code></li><li>Run the Script: Execute the script by running the following command in your terminal:</li></ul><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Bash" data-lang="Bash"><span class="line"><span class="cl">python forum_to_markdown.py</span></span></code></pre></div><p>This script will output each post to its own Markdown file in the<code>markdown_posts</code> directory.</p><p>That&rsquo;s it for now. Do let me know what you think.</p>
]]></content:encoded><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"/></channel></rss>